(this["webpackJsonpmaryland-metrics"]=this["webpackJsonpmaryland-metrics"]||[]).push([[0],{208:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(15),i=a.n(o),l=(a(90),a(53)),c=a(76),u=a(52),s=a.n(u),d="STMA",m="STMA_DELTA",f="STMA_PERC_DELTA",h={},p=function(e){return Math.round(1e3*e)/1e3};h.PercentDelta=function(e){var t=e.TotalCases,a=e.CaseDelta;return t?p(a/t):""},h.ReportDate=function(e){return s()(new Date(e.ReportDate)).format("MM/DD/YYYY")},h[m]=function(e,t){return t&&t[d]?(e[d]-t[d]).toString():""},h[f]=function(e,t){return t&&t[d]?p((e[d]-t[d])/e[d]):""};var C=["ALLE","ANNE","BALT","BCITY","CALV","CARO","CARR","CECI","CHAR","DORC","FRED","GARR","HARF","HOWA","KENT","MONT","PRIN","QUEE","SOME","STMA","TALB","WASH","WICO","WORC"],E=["ReportDate","TotalCases","CaseDelta","PercentDelta",d,m,f,"ALLE","ANNE","BALT","BCITY","CALV","CARO","CARR","CECI","CHAR","DORC","FRED","GARR","HARF","HOWA","KENT","MONT","PRIN","QUEE","SOME","STMA","TALB","WASH","WICO","WORC","deaths","deathALLE","deathANNE","deathBALT","deathBCITY","deathCALV","deathCARO","deathCARR","deathCECI","deathCHAR","deathDORC","deathFRED","deathGARR","deathHARF","deathHOWA","deathKENT","deathMONT","deathPRIN","deathQUEE","deathSTMA","deathSOME","deathTALB","deathWASH","deathWICO","deathWORC"],R=a(229),A=a(231),g=a(235),v=a(234),y=a(230),D=a(232),T=a(233),O=a(240),b=["PercentDelta",f];function S(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var M=function(e){var t=r.a.useState("asc"),a=Object(l.a)(t,2),n=a[0],o=a[1],i=r.a.useState("ReportDate"),c=Object(l.a)(i,2),u=c[0],s=c[1],d=function(e){return function(t){!function(e,t){o(u===t&&"asc"===n?"desc":"asc"),s(t)}(0,e)}},m=E,f=e.data;return r.a.createElement(R.a,null,r.a.createElement(y.a,{style:{maxHeight:"calc(90vh - 50px)"}},r.a.createElement(A.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small"},r.a.createElement(D.a,null,r.a.createElement(T.a,null,m.map((function(e){return r.a.createElement(v.a,{key:e,align:"left"},r.a.createElement(O.a,{active:u===e,direction:u===e?n:"asc",onClick:d(e)},e,u===e?r.a.createElement("span",{style:{display:"none"}},"desc"===n?"sorted descending":"sorted ascending"):null))})))),r.a.createElement(g.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(f,function(e,t){return"desc"===e?function(e,a){return S(e,a,t)}:function(e,a){return-S(e,a,t)}}(n,u)).map((function(e){return r.a.createElement(T.a,{hover:!0,role:"checkbox",tabIndex:-1,key:e.code},m.map((function(t){var a,n=e[t];return r.a.createElement(v.a,{key:t,align:"left"},b.indexOf(t)>=0?(a=n)?Math.round(1e3*a)/10+"%":"":n)})))}))))))},L=a(238),B=a(236),H=a(77),k=function(e){var t=e.lines,a=e.title,n=e.dateLabels,o=e.logarithmic,i=e.displayLegend,l=e.height,c={labels:n,datasets:t.map((function(e){return{label:e.title,fill:!!e.fillColor,lineTension:.1,backgroundColor:e.fillColor,borderColor:e.lineColor,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:e.lineColor,pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:e.lineColor,pointHoverBorderColor:e.lineColor,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:e.values}}))},u={title:{text:a,display:!0},responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{display:!0}],yAxes:[{display:!0,type:o?"logarithmic":void 0}]},legend:{display:i,position:"bottom"}};return r.a.createElement("div",{style:{height:l||300,marginBottom:0}},r.a.createElement(H.a,{data:c,options:u}))},I=function(e){return e?e.reduce((function(e,t){return e+t}),0)/e.length:0},W=a(187).convertArrayToCSV,N=a(192),x=(0,a(193).default)({count:30}).map((function(e){return e.toString()})),w=function(e){var t=["52, 163, 73","51, 72, 176","145, 36, 36"];return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{padding:"1rem"},r.a.createElement(M,e),r.a.createElement(B.a,{onClick:function(){return N(W(e.data),"data.csv","text/csv")}},"Download CSV")),["TotalCases","CaseDelta","PercentDelta",d,m,f].map((function(a,n){return r.a.createElement(L.a,{padding:"1rem"},r.a.createElement(k,{displayLegend:!1,logarithmic:!1,dateLabels:e.data.map((function(e){return e.ReportDate})),lines:[{lineColor:"rgb(".concat(t[n%t.length],")"),fillColor:"rgb(".concat(t[n%t.length],", 0.35)"),title:a,values:e.data.map((function(e){return e[a]}))}],title:a,key:a}))})),[{title:"Cases by County",datasets:C.map((function(t){return{title:t,data:e.data.map((function(e){return e[t]}))}}))},{title:"5-Day Moving Average",datasets:C.map((function(t){var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,a=Math.floor(t),n=Math.floor(a/2),r=a-n,o=e.length;return e.map((function(t,a){return I(e.slice(Math.max(0,a-n),Math.min(o,a+r)))}))}(e.data.map((function(e){return parseInt(e[t])||0})));return{title:t,data:a}}))}].map((function(t){return r.a.createElement(L.a,{padding:"1rem"},r.a.createElement(k,{height:"90vh",displayLegend:!0,logarithmic:!0,dateLabels:e.data.map((function(e){return e.ReportDate})),lines:t.datasets.map((function(e,t){return{lineColor:x[t],title:e.title,values:e.data}})),title:t.title,key:t.title}))})))},F=function(e){return r.a.createElement("h1",null,"ERROR: ",e.message)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));fetch("https://services.arcgis.com/njFNhDsUCentVYJW/arcgis/rest/services/MASTER_CaseTracker_3/FeatureServer/0/query?f=json&where=1%3D1&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=*&orderByFields=ReportDate%20asc&resultOffset=0&resultRecordCount=32000&resultType=standard&cacheHint=true").then((function(e){return e.json()})).then((function(e){var t=e.features.map((function(e){return e.attributes}));return t.map((function(e,a){var n,r={},o=Object(c.a)(E);try{for(o.s();!(n=o.n()).done;){var i=n.value;h[i]?r[i]=h[i](e,a>0?t[a-1]:void 0):r[i]=e[i]}}catch(l){o.e(l)}finally{o.f()}return r}))})).then((function(e){i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,{data:e})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))})).catch((function(e){console.log("ERROR:",e),i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,{message:e})),document.getElementById("root"))}))},85:function(e,t,a){e.exports=a(208)},90:function(e,t,a){}},[[85,1,2]]]);
//# sourceMappingURL=main.8702b8b7.chunk.js.map